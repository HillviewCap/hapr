global
 log /dev/log local0
 log /dev/log local1 notice
 daemon

defaults
 log global
 mode tcp
 timeout connect 5000
 timeout client 50000
 timeout server 50000
frontend workers_https
 bind *:443
 mode tcp
 use_backend ingress_https
backend ingress_https
 option httpchk GET /healthz
 mode tcp
 server worker $worker1:443 check port 80
 server worker2 $worker2:443 check port 80
 server worker3 $worker3:443 check port 80

frontend workers_http
 bind *:80
 use_backend ingress_http
backend ingress_http
 mode http
 option httpchk GET /healthz
 server worker $worker1:80 check port 80
 server worker2 $worker2:80 check port 80
 server worker3 $worker3:80 check port 80

