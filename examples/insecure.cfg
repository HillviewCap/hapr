# =============================================================================
# Insecure HAProxy Configuration
# A deliberately weak configuration for testing security audit tools.
# DO NOT use this in production. This config should score very low on audits.
# =============================================================================

global
    # No chroot - process runs without isolation
    # No user/group - runs as whatever user starts it (likely root)

    # Minimal logging - only emergencies
    log 127.0.0.1 local0 emerg

    # No daemon mode specified
    # No maxconn limit in global
    # No SSL defaults configured
    # No DH parameter tuning
    # No stats socket protection

    stats socket /var/run/haproxy.sock level admin

# =============================================================================
# Defaults
# =============================================================================
defaults
    mode http
    log global

    # Only connect timeout, missing client/server/http-request/queue timeouts
    timeout connect 30s

    # No httplog option
    # No dontlognull
    # No forwardfor
    # No http-server-close
    # No redispatch
    # No retries configured
    # No maxconn
    # No error files

# =============================================================================
# Frontend: HTTP only (no SSL/TLS at all)
# =============================================================================
frontend ft_web
    bind *:80
    mode http

    # No HTTPS redirect
    # No SSL/TLS termination
    # No security headers
    # No rate limiting
    # No ACLs to block sensitive paths
    # No maxconn on frontend
    # No request size limits

    default_backend bk_servers

# =============================================================================
# Backend: Servers
# =============================================================================
backend bk_servers
    mode http
    balance roundrobin

    # No health checks
    # No connection limits
    # No SSL to backend servers
    # No cookie security (no httponly, no secure flags)
    # No server verification

    server web1 10.0.1.50:8080
    server web2 10.0.1.51:8080
    server web3 10.0.1.52:8080

# =============================================================================
# Listen: Stats page wide open
# =============================================================================
listen stats
    bind *:9000
    mode http
    stats enable
    stats uri /
    stats refresh 5s
    # No authentication on stats page
    # No ACL restrictions
    # Stats page exposed on all interfaces
